<% content_for :title, "Edit Category - #{@category.name}" %>

<div class="admin-card">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="card-title mb-0">
      <i class="fas fa-edit me-2"></i>Edit Category
    </h1>
    <%= link_to "Back", admin_category_path(@category), class: "btn btn-outline-secondary" %>
  </div>
  
  <%= form_with model: [:admin, @category], local: true do |f| %>
    <% if @category.errors.any? %>
      <div class="alert alert-danger">
        <h5>Please fix the following errors:</h5>
        <ul class="mb-0">
          <% @category.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
    
    <div class="mb-3">
      <%= f.label :name, class: "form-label" %>
      <%= f.text_field :name, class: "form-control", required: true %>
    </div>
    
    <div class="mb-3">
      <%= f.label :short_description, "Short Description", class: "form-label" %>
      <%= f.text_area :short_description, rows: 4, class: "form-control" %>
    </div>
    
    <div class="row">
      <div class="col-md-6">
        <div class="mb-3">
          <%= f.label :parent_id, "Parent Category", class: "form-label" %>
          <%= f.select :parent_id, 
              options_from_collection_for_select(Category.where.not(id: @category.id), :id, :name, @category.parent_id),
              { include_blank: "None (Root Category)" }, 
              { class: "form-select", 
                data: { searchable: Category.count > 10 ? "true" : "false", max_items: 10 } } %>
        </div>
      </div>
      
      <div class="col-md-6">
        <div class="mb-3">
          <%= f.label :image_url, "Image URL", class: "form-label" %>
          <%= f.url_field :image_url, class: "form-control" %>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-md-6">
        <div class="mb-3">
          <%= f.label :sort_order, "Sort Order", class: "form-label" %>
          <%= f.number_field :sort_order, class: "form-control", value: @category.sort_order || 0 %>
        </div>
      </div>
      
      <div class="col-md-6">
        <div class="mb-3">
          <div class="form-check mt-4">
            <%= f.check_box :featured, class: "form-check-input" %>
            <%= f.label :featured, "Featured Category", class: "form-check-label" %>
          </div>
        </div>
      </div>
    </div>
    
    <div class="d-flex gap-2">
      <%= f.submit "Update Category", class: "btn btn-primary" %>
      <%= link_to "Cancel", admin_category_path(@category), class: "btn btn-outline-secondary" %>
    </div>
  <% end %>
</div>

