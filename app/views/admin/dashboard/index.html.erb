<% content_for :page_title, "Dashboard" %>

<div class="container-fluid">
  <!-- Statistics Cards -->
  <div class="row mb-4">
    <div class="col-xl-2 col-md-4 col-sm-6 mb-3">
      <div class="card card-admin">
        <div class="card-body text-center">
          <div class="stat-icon mb-2">
            <i class="bi bi-people-fill text-primary" style="font-size: 2rem;"></i>
          </div>
          <h3 class="stat-value text-primary"><%= @stats[:total_users] %></h3>
          <p class="stat-label text-muted mb-0">Total Users</p>
        </div>
      </div>
    </div>
    
    <div class="col-xl-2 col-md-4 col-sm-6 mb-3">
      <div class="card card-admin">
        <div class="card-body text-center">
          <div class="stat-icon mb-2">
            <i class="bi bi-shop text-success" style="font-size: 2rem;"></i>
          </div>
          <h3 class="stat-value text-success"><%= @stats[:total_suppliers] %></h3>
          <p class="stat-label text-muted mb-0">Total Suppliers</p>
        </div>
      </div>
    </div>
    
    <div class="col-xl-2 col-md-4 col-sm-6 mb-3">
      <div class="card card-admin">
        <div class="card-body text-center">
          <div class="stat-icon mb-2">
            <i class="bi bi-box text-info" style="font-size: 2rem;"></i>
          </div>
          <h3 class="stat-value text-info"><%= @stats[:total_products] %></h3>
          <p class="stat-label text-muted mb-0">Total Products</p>
        </div>
      </div>
    </div>
    
    <div class="col-xl-2 col-md-4 col-sm-6 mb-3">
      <div class="card card-admin">
        <div class="card-body text-center">
          <div class="stat-icon mb-2">
            <i class="bi bi-cart-check text-warning" style="font-size: 2rem;"></i>
          </div>
          <h3 class="stat-value text-warning"><%= @stats[:total_orders] %></h3>
          <p class="stat-label text-muted mb-0">Total Orders</p>
        </div>
      </div>
    </div>
    
    <div class="col-xl-2 col-md-4 col-sm-6 mb-3">
      <div class="card card-admin">
        <div class="card-body text-center">
          <div class="stat-icon mb-2">
            <i class="bi bi-clock text-danger" style="font-size: 2rem;"></i>
          </div>
          <h3 class="stat-value text-danger"><%= @stats[:pending_products] %></h3>
          <p class="stat-label text-muted mb-0">Pending Products</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Dashboard Sections -->
  <div class="row">
    <div class="col-lg-4 mb-4">
      <div class="card card-admin">
        <div class="card-header">
          <h5 class="mb-0"><i class="bi bi-receipt me-2"></i>Recent Orders</h5>
        </div>
        <div class="card-body">
          <% if @stats[:recent_orders].any? %>
            <div class="list-group list-group-flush">
              <% @stats[:recent_orders].each do |order| %>
                <div class="list-group-item d-flex justify-content-between align-items-start">
                  <div class="ms-2 me-auto">
                    <div class="fw-bold">Order #<%= order.id %></div>
                    <small class="text-muted"><%= order.user.full_name %> - $<%= order.total_amount %></small>
                  </div>
                  <span class="badge bg-<%= order.status == 'completed' ? 'success' : order.status == 'pending' ? 'warning' : 'info' %>">
                    <%= order.status.humanize %>
                  </span>
                </div>
              <% end %>
            </div>
          <% else %>
            <p class="text-muted text-center">No recent orders</p>
          <% end %>
        </div>
      </div>
    </div>
    
    <div class="col-lg-4 mb-4">
      <div class="card card-admin">
        <div class="card-header">
          <h5 class="mb-0"><i class="bi bi-people me-2"></i>Recent Users</h5>
        </div>
        <div class="card-body">
          <% if @stats[:recent_users].any? %>
            <div class="list-group list-group-flush">
              <% @stats[:recent_users].each do |user| %>
                <div class="list-group-item d-flex justify-content-between align-items-start">
                  <div class="ms-2 me-auto">
                    <div class="fw-bold"><%= user.full_name %></div>
                    <small class="text-muted"><%= user.email %></small>
                  </div>
                  <span class="badge bg-<%= user.role == 'vip_customer' ? 'danger' : user.role == 'premium_customer' ? 'info' : 'secondary' %>">
                    <%= user.role.humanize %>
                  </span>
                </div>
              <% end %>
            </div>
          <% else %>
            <p class="text-muted text-center">No recent users</p>
          <% end %>
        </div>
      </div>
    </div>
    
    <div class="col-lg-4 mb-4">
      <div class="card card-admin">
        <div class="card-header">
          <h5 class="mb-0"><i class="bi bi-shop me-2"></i>Recent Suppliers</h5>
        </div>
        <div class="card-body">
          <% if @stats[:recent_suppliers].any? %>
            <div class="list-group list-group-flush">
              <% @stats[:recent_suppliers].each do |supplier| %>
                <div class="list-group-item d-flex justify-content-between align-items-start">
                  <div class="ms-2 me-auto">
                    <div class="fw-bold"><%= supplier.full_name %></div>
                    <small class="text-muted"><%= supplier.email %></small>
                  </div>
                  <span class="badge bg-<%= supplier.role == 'partner_supplier' ? 'danger' : supplier.role == 'premium_supplier' ? 'info' : supplier.role == 'verified_supplier' ? 'success' : 'secondary' %>">
                    <%= supplier.role.humanize %>
                  </span>
                </div>
              <% end %>
            </div>
          <% else %>
            <p class="text-muted text-center">No recent suppliers</p>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

